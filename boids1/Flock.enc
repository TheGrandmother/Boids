import Boid

class Flock
  boids : [Boid] -- Use static array as a size
  cap   : int    -- Capacity
  len   : int    -- Actual length

  def init() : void {
    this.cap = 10;
    this.len = 0;
    this.boids = new [Boid](this.cap)
  }

  def add(b: Boid): void {
    if (this.len >= this.cap) then
      let newBoids = new [Boid](this.cap + 10) in {
        repeat i <- this.len
          newBoids[i] = this.boids[i];
        this.boids = newBoids;
        this.cap  = this.cap + 10
        -- this.len unchanged
      };
    this.boids[this.len] = b;
    this.len = this.len + 1
  }

  def size(): int {
    this.len
  }
